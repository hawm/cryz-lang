{"version":3,"file":"main.js","mappings":"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","sources":["webpack://cryz-lang/external window \"lodash\"","webpack://cryz-lang/external window [\"wp\",\"components\"]","webpack://cryz-lang/external window [\"wp\",\"coreData\"]","webpack://cryz-lang/external window [\"wp\",\"data\"]","webpack://cryz-lang/external window [\"wp\",\"editor\"]","webpack://cryz-lang/external window [\"wp\",\"element\"]","webpack://cryz-lang/external window [\"wp\",\"hooks\"]","webpack://cryz-lang/webpack/bootstrap","webpack://cryz-lang/webpack/runtime/compat get default export","webpack://cryz-lang/webpack/runtime/define property getters","webpack://cryz-lang/webpack/runtime/hasOwnProperty shorthand","webpack://cryz-lang/webpack/runtime/make namespace object","webpack://cryz-lang/./javascript/index.js"],"sourcesContent":["module.exports = window[\"lodash\"];","module.exports = window[\"wp\"][\"components\"];","module.exports = window[\"wp\"][\"coreData\"];","module.exports = window[\"wp\"][\"data\"];","module.exports = window[\"wp\"][\"editor\"];","module.exports = window[\"wp\"][\"element\"];","module.exports = window[\"wp\"][\"hooks\"];","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import { createElement, useState } from \"@wordpress/element\";\nimport { SelectControl } from \"@wordpress/components\";\nimport { useSelect, useDispatch } from \"@wordpress/data\";\nimport { store as coreStore } from \"@wordpress/core-data\";\nimport { store as editorStore } from \"@wordpress/editor\";\nimport { defaultHooks } from \"@wordpress/hooks\";\nimport { get } from \"lodash\";\n\nconst DEFAULT_QUERY = {\n  per_page: -1,\n  orderby: \"name\",\n  order: \"asc\",\n  _fields: \"id,name\",\n  context: \"view\",\n};\n\nfunction languageSelector({ slug }) {\n  const { terms, availableTerms, taxonomy, hasAssignAction } = useSelect(\n    (select) => {\n      const { getCurrentPost, getEditedPostAttribute } = select(editorStore);\n      const { getTaxonomy, getEntityRecords, isResolving } = select(coreStore);\n      const _taxonomy = getTaxonomy(slug);\n      const post = getCurrentPost();\n\n      return {\n        terms: _taxonomy ? getEditedPostAttribute(_taxonomy.rest_base) : [],\n        availableTerms: getEntityRecords(\"taxonomy\", slug, DEFAULT_QUERY) || [],\n        taxonomy: _taxonomy,\n        hasAssignAction: _taxonomy\n          ? get(\n              post,\n              [\"_links\", \"wp:action-assign-\" + _taxonomy.rest_base],\n              false\n            )\n          : false,\n      };\n    }\n  );\n\n  if (!hasAssignAction) {\n    return null;\n  }\n\n  const { editPost } = useDispatch(editorStore);\n  //const { saveEntityRecord } = useDispatch(coreStore);\n\n  // update term for post\n  const onUpdateTerm = (termId) => {\n    console.log(\"editPost\");\n    editPost({ [taxonomy.rest_base]: termId ? [termId] : [] });\n  };\n\n  // handle for select term\n  const onChange = (termId) => {\n    console.log(termId);\n    termId = termId === \"default\" ? false : termId;\n    onUpdateTerm(termId);\n  };\n\n  const [termId, setTermId] = useState(terms[0] || \"default\");\n\n  return createElement(SelectControl, {\n    label: \"Language\",\n    value: termId,\n    options: [\n      ...availableTerms.map((term) => ({ label: term.name, value: term.id })),\n      { label: \"Default\", value: \"default\" },\n    ],\n    onChange: (termId) => {\n      setTermId(termId);\n      onChange(termId);\n    },\n    __nextHasNoMarginBottom: true,\n    help: \"Select language for post.\"\n  });\n}\n\nfunction customLanguageSelector(OriginalComponent) {\n  return function (props) {\n    if (props.slug === \"cryz_lang\") {\n      return createElement(languageSelector, props);\n    } else {\n      return createElement(OriginalComponent, props);\n    }\n  };\n}\n\ndefaultHooks.addFilter(\n  \"editor.PostTaxonomyType\",\n  \"cryz-lang/custom-language-selector\",\n  customLanguageSelector\n);\n"],"names":["createElement","useState","SelectControl","useSelect","useDispatch","store","coreStore","editorStore","defaultHooks","get","DEFAULT_QUERY","per_page","orderby","order","_fields","context","languageSelector","slug","terms","availableTerms","taxonomy","hasAssignAction","select","getCurrentPost","getEditedPostAttribute","getTaxonomy","getEntityRecords","isResolving","_taxonomy","post","rest_base","editPost","onUpdateTerm","termId","console","log","onChange","setTermId","label","value","options","map","term","name","id","__nextHasNoMarginBottom","help","customLanguageSelector","OriginalComponent","props","addFilter"],"sourceRoot":""}